# Графический редактор

## Стек технологий  
- **Backend:** Java + WebSocket API  
- **Frontend:** HTML5 Canvas + JavaScript  
- **Веб-протокол:** WebSocket

## Интерфейс
![image](https://github.com/user-attachments/assets/347ff353-0587-4a0d-aea8-5441fd70f02c)

## ПОСТРОЕНИЕ ОТРЕЗКОВ

### DDA (Digital Differential Analyzer)
DDA — алгоритм цифрового дифференциального анализатора, используемый для построения отрезков прямых линий на растровых дисплеях. Алгоритм основан на интерполяции значений координат точки линии с использованием приращений по оси X или Y, в зависимости от угла наклона линии. DDA обеспечивает простой и эффективный способ дискретизации линии.

#### Принцип работы:
- Рассчитываются приращения координат (`dx`, `dy`) между начальной и конечной точками.
- Координаты последовательно увеличиваются на эти приращения, пока не будет достигнута конечная точка.

---

### Алгоритм Брезенхема (Bresenham)
Алгоритм Брезенхема — эффективный метод построения отрезков прямых линий на растровом дисплее с минимальным количеством вычислений. В отличие от DDA, использует только целочисленные операции (сложение и вычитание), что делает его быстрее и точнее.

#### Принцип работы:
- Вычисляется ошибка при отклонении точки от идеальной линии.
- На каждом шаге выбирается пиксель, минимизирующий эту ошибку, и корректируется ошибка для следующей итерации.

---

### Алгоритм Ву (Wu's Algorithm)
Алгоритм Ву — метод антиалиасинга для рисования линий с целью уменьшения эффекта «лесенки». Он обеспечивает сглаживание границ линий путем частичного закрашивания соседних пикселей с интенсивностью, пропорциональной их расстоянию от идеальной линии.

#### Принцип работы:
- Определяется основной и соседний пиксели для каждой координаты линии.
- Вычисляется интенсивность закраски каждого пикселя на основе расстояния от идеальной линии.


## АЛГОРИТМЫ ПОСТРОЕНИЯ КРИВЫХ

### Окружность
Алгоритм Брезенхема для построения окружности использует симметрию относительно четырех четвертей, что минимизирует количество вычислений.

#### Принцип работы:
- Начинается с верхней точки окружности и рассчитывается начальное значение ошибки.
- Используется симметрия окружности для рисования точек в других четвертях.
- Алгоритм выбирает пиксель, минимизируя ошибку, и корректирует ошибку для следующей итерации.

---

### Эллипс
Алгоритм Брезенхема для эллипса использует оси симметрии и работает в два этапа: сначала по оси X, затем по оси Y.

#### Принцип работы:
- Разделяется процесс на два этапа для построения эллипса вдоль осей X и Y.
- Для каждой оси используется ошибка для минимизации отклонения от идеальной линии.
- Используется симметрия для ускорения процесса.

---

### Парабола
Для построения параболы \(y = ax^2 + bx + c\) применяется адаптация алгоритма Брезенхема, которая позволяет эффективно рисовать кривую.

#### Принцип работы:
- Парабола строится по оси X, для каждого значения \(x\) находится соответствующее \(y\).
- Алгоритм минимизирует ошибку между реальным значением \(y\) и значением, полученным по уравнению параболы.
- Выбирается следующий пиксель, минимизируя отклонение.

---

### Гипербола
Для построения гиперболы \(y^2/a^2 - x^2/b^2 = 1\) используется алгоритм, похожий на тот, что применяется для эллипсов, с учетом асимптот.

#### Принцип работы:
- Алгоритм строит гиперболу, минимизируя отклонение точки от идеальной кривой.
- Строится параллельно по осям X и Y с корректировкой ошибки на каждом шаге.
- Используется симметрия гиперболы для ускорения процесса.

### Кривые Безье
Кривые Безье широко используются в компьютерной графике и моделировании для построения гладких кривых, основанных на контрольных точках.

#### Принцип работы:
- Кривая строится с использованием интерполяции между контрольными точками.
- В основе лежит формула \( B(t) = \sum_{i=0}^{n} B_i P_i \), где \( B_i \) — биномиальные коэффициенты, а \( P_i \) — контрольные точки.
- Используется алгоритм Де Кастельжо для пошагового вычисления точек кривой.

---

### Кривые Эрмита
Кривые Эрмита представляют собой сплайны, которые задаются начальной и конечной точками, а также касательными в этих точках.

#### Принцип работы:
- Определяются начальная и конечная точки, а также направления касательных в этих точках.
- Кривая вычисляется с помощью полиномов Эрмита.
- Формула: \( H(t) = (2t^3 - 3t^2 + 1) P_0 + (t^3 - 2t^2 + t) R_0 + (-2t^3 + 3t^2) P_1 + (t^3 - t^2) R_1 \), где \( P_0, P_1 \) — контрольные точки, \( R_0, R_1 \) — касательные.

---

### B-сплайны
B-сплайны (Basis splines) позволяют строить гладкие кривые, проходящие через заданное множество контрольных точек.

#### Принцип работы:
- Используется набор контрольных точек, через которые проходит кривая.
- Кривая строится как взвешенная сумма базисных функций.
- Обеспечивается локальное управление формой кривой, поскольку каждая точка влияет только на часть кривой.
- Применяется рекурсивная формула Де Бура для вычисления координат точек.

B-сплайны находят широкое применение в моделировании, анимации и обработке изображений.

## Построение 3d
### Формат .obj
- загружать объекты нужно в .obj формате, пример:
```
# Вершины куба
v -1 -1 -1
v 1 -1 -1
v 1 1 -1
v -1 1 -1
v -1 -1 1
v 1 -1 1
v 1 1 1
v -1 1 1

# Грани куба
f 1 2 3
f 1 3 4
f 5 6 7
f 5 7 8
f 1 2 6
f 1 6 5
f 2 3 7
f 2 7 6
f 3 4 8
f 3 8 7
f 4 1 5
f 4 5 8
```
![image](https://github.com/user-attachments/assets/e2cef83f-6ff3-428a-a3bc-5d5a7a3f4df2)
### Управление
- Стрелки: крутить объект
- WASD: перемещать объект
- +-: масштабирование
- O, P: изменение перспективы 

## Полигоны
![image](https://github.com/user-attachments/assets/6554670f-b5ac-4baa-8e98-2f057d14ede2)

Алгоритмы, представленные в данном разделе, предназначены для построения выпуклых оболочек множества точек.

### Алгоритм Грэхема
Алгоритм Грэхема используется для построения выпуклой оболочки множества точек на плоскости. Он работает за **O(n log n)** и основан на сортировке точек по углу относительно самой нижней точки, а затем последовательном добавлении точек с проверкой на выпуклость.

### Алгоритм Джарвиса
Алгоритм Джарвиса (метод заворачивания подарка) также предназначен для построения выпуклой оболочки. Он имеет сложность **O(nh)**, где `h` — количество точек в выпуклой оболочке. Этот алгоритм выбирает крайнюю левую точку и последовательно находит следующую точку оболочки, пока не вернётся к начальной.

## Заполнение полигонов

Заполнение многоугольников — важная задача в компьютерной графике, используемая для рендеринга фигур. Эти алгоритмы определяют, какие пиксели должны быть закрашены внутри заданного многоугольника.

### Scanline Fill
Метод построчного заполнения (scanline fill) проходит по горизонтальным строкам изображения и заполняет пиксели между рёбрами многоугольника. Это один из наиболее эффективных алгоритмов для растровой графики.

### AET Fill
Алгоритм Active Edge Table (AET) также использует построчное заполнение, но оптимизирует процесс за счёт хранения списка активных рёбер. Он динамически обновляет список рёбер, что делает его эффективным для сложных многоугольников.

### Flood Fill
Метод заливки "разливкой" (flood fill) используется для заполнения областей, ограниченных цветными границами. Он применяется в графических редакторах (например, инструмент "заливка" в Paint). Алгоритм может быть реализован рекурсивно или с использованием очереди.

### Scanline Flood Fill
Комбинированный алгоритм, использующий принципы flood fill и построчного заполнения. Вместо рекурсивного подхода, который может вызывать переполнение стека, он заполняет область строками, обеспечивая более эффективную заливку.

## Диаграмма вороного
![image](https://github.com/user-attachments/assets/69d4d093-a935-4b17-9681-520e706d7c24)

Диаграмма Вороного — это геометрическое разбиение плоскости, где каждая область содержит точки, ближайшие к определённому сайту (точке). Такой подход широко применяется в геоинформационных системах, компьютерной графике и моделировании для анализа пространственных отношений.

Сначала выполняется триангуляция Делоне методом Bowyer–Watson, затем на основе дуальных отношений между треугольниками вычисляются ребра диаграммы Вороного. Используются базовые геометрические классы (Pixel, Edge, Triangle, LineSegment, Rectangle) и алгоритм Брезенхэма для отрисовки линий.
